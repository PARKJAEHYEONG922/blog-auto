"""
ë¸”ë¡œê·¸ ìë™í™” AI í”„ë¡¬í”„íŠ¸ ë° êµ¬ì¡°í™”ëœ ë°ì´í„° ìƒì„±
"""
from typing import Dict, List, Any
from src.foundation.logging import get_logger

logger = get_logger("blog_automation.ai_prompts")


class BlogContentStructure:
    """ë¸”ë¡œê·¸ ì½˜í…ì¸  êµ¬ì¡° ë¶„ì„ ë° AIìš© ë°ì´í„° ìƒì„±"""
    
    def __init__(self):
        self.content_elements = []
        self.analysis_data = {}
    
    def analyze_blog_structure(self, analyzed_blogs: List[Dict]) -> Dict:
        """ë¶„ì„ëœ ë¸”ë¡œê·¸ë“¤ì˜ êµ¬ì¡°ë¥¼ ë¶„ì„í•˜ì—¬ AIìš© ë°ì´í„° ìƒì„±"""
        try:
            structured_data = {
                "keyword": "",
                "competitor_analysis": {
                    "top_blogs": [],
                    "summary": {
                        "total_blogs": len(analyzed_blogs),
                        "avg_content_length": 0,
                        "common_tags": [],
                        "content_patterns": []
                    }
                }
            }
            
            total_length = 0
            all_tags = []
            
            for blog in analyzed_blogs:
                # ê°œë³„ ë¸”ë¡œê·¸ êµ¬ì¡° ë¶„ì„
                blog_structure = self.extract_blog_structure(blog)
                structured_data["competitor_analysis"]["top_blogs"].append(blog_structure)
                
                # í†µê³„ ê³„ì‚°ìš©
                total_length += blog.get('content_length', 0)
                all_tags.extend(blog.get('tags', []))
            
            # í‰ê·  ë° ê³µí†µ íŒ¨í„´ ê³„ì‚°
            if analyzed_blogs:
                structured_data["competitor_analysis"]["summary"]["avg_content_length"] = total_length // len(analyzed_blogs)
                
                # ê°€ì¥ ë§ì´ ì‚¬ìš©ëœ íƒœê·¸ ìƒìœ„ 5ê°œ
                from collections import Counter
                tag_counter = Counter(all_tags)
                structured_data["competitor_analysis"]["summary"]["common_tags"] = [
                    tag for tag, count in tag_counter.most_common(5)
                ]
            
            return structured_data
            
        except Exception as e:
            logger.error(f"ë¸”ë¡œê·¸ êµ¬ì¡° ë¶„ì„ ì‹¤íŒ¨: {e}")
            return {}
    
    def extract_blog_structure(self, blog: Dict) -> Dict:
        """ê°œë³„ ë¸”ë¡œê·¸ì˜ êµ¬ì¡° ì¶”ì¶œ"""
        return {
            "rank": blog.get('rank', 0),
            "title": blog.get('title', ''),
            "url": blog.get('url', ''),
            "statistics": {
                "content_length": blog.get('content_length', 0),
                "image_count": blog.get('image_count', 0),
                "gif_count": blog.get('gif_count', 0),
                "video_count": blog.get('video_count', 0),
                "tag_count": len(blog.get('tags', []))
            },
            "tags": blog.get('tags', []),
            "content_preview": blog.get('text_content', '')[:200] + "..." if blog.get('text_content', '') else ''
        }


class BlogAIPrompts:
    """ë¸”ë¡œê·¸ AI ìƒì„±ì„ ìœ„í•œ í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿"""
    
    @staticmethod
    def generate_naver_seo_prompt(keyword: str, structured_data: Dict) -> str:
        """ë„¤ì´ë²„ SEO ìµœì í™” í”„ë¡¬í”„íŠ¸ ìƒì„± (ìƒˆë¡œìš´ ë²„ì „)"""
        
        competitor_info = structured_data.get("competitor_analysis", {})
        top_blogs = competitor_info.get("top_blogs", [])
        summary = competitor_info.get("summary", {})
        
        # í‰ê·  ê³„ì‚°
        avg_content_length = summary.get('avg_content_length', 1500)
        total_images = sum(blog['statistics']['image_count'] for blog in top_blogs) if top_blogs else 3
        avg_images = total_images // len(top_blogs) if top_blogs else 3
        
        prompt = f"""[AI ì—­í•  ë° í˜ë¥´ì†Œë‚˜ ì„¤ì •] 
ë‹¹ì‹ ì€ 15ë…„ ê²½ë ¥ì˜ ë„¤ì´ë²„ ë¸”ë¡œê·¸ ì „ë¬¸ ë§ˆì¼€í„°ì´ì SEO ì „ë¬¸ê°€ì…ë‹ˆë‹¤. ì ì¬ ê³ ê°ì˜ ê²€ìƒ‰ ì˜ë„ë¥¼ ì •í™•íˆ íŒŒì•…í•˜ê³ , ê·¸ë“¤ì´ í¥ë¯¸ë¡œì›Œí•  ë§Œí•œ ê¹Šì´ ìˆê³  ìœ ì¼ë¬´ì´í•œ ì½˜í…ì¸ ë¥¼ ì „ë¬¸ì ì´ê³  ì¹œê·¼í•œ ì–´ì¡°ë¡œ ì‘ì„±í•˜ì—¬ ë§¤ì¶œ ì „í™˜ì„ ìœ ë„í•˜ëŠ” ê²ƒì´ ë‹¹ì‹ ì˜ ëª©í‘œì…ë‹ˆë‹¤. ë„¤ì´ë²„ì˜ C-Rank, DIA, Air Search ë¡œì§ì„ ì™„ë²½í•˜ê²Œ ì´í•´í•˜ê³  ì´ë¥¼ ê¸€ì“°ê¸°ì— ì ìš©í•´ì•¼ í•©ë‹ˆë‹¤.

[ì‘ì—… ë‚´ìš© ë° ëª©í‘œ] 
ì£¼ì–´ì§„ í‚¤ì›Œë“œì— ëŒ€í•´ ìƒìœ„ ë…¸ì¶œì„ ëª©í‘œë¡œ í•˜ëŠ” ë„¤ì´ë²„ ë¸”ë¡œê·¸ í¬ìŠ¤íŒ…ì„ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤. ë‚´ê°€ ì œê³µí•˜ëŠ” ìƒìœ„ 3ê°œ ë¸”ë¡œê·¸ ê¸€ ë°ì´í„°ë¥¼ ì² ì €íˆ ë¶„ì„í•˜ì—¬ ìš°ë¦¬ ê¸€ì— ìµœëŒ€í•œ ë°˜ì˜í•˜ê³ , ë„¤ì´ë²„ ê²€ìƒ‰ ì—”ì§„ ìµœì í™”(SEO) ì›ì¹™ì„ ì¤€ìˆ˜í•˜ì—¬ ë†’ì€ í’ˆì§ˆì˜ ê¸€ì„ ìƒì„±í•´ ì£¼ì„¸ìš”.

[íƒ€ê²Ÿ í‚¤ì›Œë“œ ë° ê¸€ ì£¼ì œ]
â€¢ íƒ€ê²Ÿ í‚¤ì›Œë“œ: "{keyword}"
â€¢ ê¸€ ì£¼ì œ: "{keyword} ê´€ë ¨ ì „ë¬¸ì ì´ê³  ìœ ìš©í•œ ì •ë³´ ì œê³µ"

[ìƒìœ„ 3ê°œ ë¸”ë¡œê·¸ ë°ì´í„° ë¶„ì„ ë° ì ìš© ì§€ì‹œ]
ë‹¤ìŒì€ {keyword}ë¡œ ìƒìœ„ ë…¸ì¶œëœ ë¸”ë¡œê·¸ ê¸€ 3ê°œì˜ ë°ì´í„°ì…ë‹ˆë‹¤. ì´ ë°ì´í„°ë¥¼ ë©´ë°€íˆ ë¶„ì„í•˜ì—¬ ìš°ë¦¬ ê¸€ ì‘ì„±ì— ë°˜ì˜í•´ ì£¼ì„¸ìš”.
"""
        
        # ê° ë¸”ë¡œê·¸ ì •ë³´ ì¶”ê°€
        for i, blog in enumerate(top_blogs[:3], 1):
            stats = blog.get('statistics', {})
            prompt += f"""
â€¢ ë¸”ë¡œê·¸ #{i}:
    â—¦ ì œëª©: {blog.get('title', 'ì œëª© ì—†ìŒ')}
    â—¦ ì´ë¯¸ì§€ ìˆ˜: {stats.get('image_count', 0)}ì¥
    â—¦ GIF ìˆ˜: {stats.get('gif_count', 0)}ê°œ
    â—¦ ë™ì˜ìƒ ìˆ˜: {stats.get('video_count', 0)}ê°œ
    â—¦ ê¸€ì ìˆ˜ (ê³µë°± ì œì™¸): {stats.get('content_length', 0)}ì"""
        
        prompt += f"""

ìœ„ ë°ì´í„° ë¶„ì„ ê²°ê³¼ ì ìš© ê°€ì´ë“œë¼ì¸:
1. ì œëª© ì‘ì„±:
    â—¦ ì œê³µëœ ìƒìœ„ ë¸”ë¡œê·¸ 3ê°œì˜ ì œëª©ê³¼ ìœ ì‚¬í•˜ì§€ ì•Šìœ¼ë©´ì„œë„ ë…ì°½ì ì´ê³  ë§¤ë ¥ì ì¸ ì œëª©ì„ ìƒì„±í•´ ì£¼ì„¸ìš”.
    â—¦ ì œëª©ì€ ëª…í™•í•˜ê³  ê°„ê²°í•´ì•¼ í•˜ë©°, ì‚¬ìš©ìì˜ ê²€ìƒ‰ ì˜ë„ë¥¼ ì´í•´í•˜ê³  ì›í•˜ëŠ” ì •ë³´ê°€ ê¸€ì— ë‹´ê²¨ìˆìŒì„ ì˜ í‘œí˜„í•´ì•¼ í•©ë‹ˆë‹¤.
    â—¦ íƒ€ê²Ÿ í‚¤ì›Œë“œë¥¼ ì œëª© ë§¨ ì•ì— ë°°ì¹˜í•´ ì£¼ì„¸ìš”.
    â—¦ ì—¬ëŸ¬ í‚¤ì›Œë“œë¥¼ í•œ ì œëª©ì— ë‚˜ì—´í•˜ëŠ” ë©€í‹° í‚¤ì›Œë“œ ì‚½ì… ì „ëµì€ í”¼í•˜ê³ , í•˜ë‚˜ì˜ í‚¤ì›Œë“œì— ì§‘ì¤‘í•˜ì—¬ ì‘ì„±í•´ ì£¼ì„¸ìš”.

2. ê¸€ì ìˆ˜:
    â—¦ ìƒìœ„ ë…¸ì¶œëœ 1~3ìœ„ ë¸”ë¡œê·¸ í¬ìŠ¤íŒ…ì˜ í‰ê·  ê¸€ì ìˆ˜({avg_content_length}ì)ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ìµœì í™”í•´ ì£¼ì„¸ìš”.
    â—¦ ëª©í‘œ ê¸€ì ìˆ˜: {avg_content_length + 200}ì (ê³µë°± ì œì™¸) - ê²½ìŸì‚¬ë³´ë‹¤ ì•½ê°„ ë” ê¸¸ê²Œ
    â—¦ 2,000ìë¥¼ ë„˜ì§€ ì•Šë„ë¡ ì£¼ì˜í•´ ì£¼ì„¸ìš”.

3. ì´ë¯¸ì§€, GIF, ë™ì˜ìƒ ìˆ˜:
    â—¦ ìƒìœ„ 1~3ìœ„ ë¸”ë¡œê·¸ ê¸€ì˜ í‰ê·  ì´ë¯¸ì§€ ìˆ˜({avg_images}ì¥)ë¥¼ ì°¸ê³ í•˜ì—¬ ì ì ˆí•œ ìˆ˜ì˜ ì´ë¯¸ì§€ ë°°ì¹˜ ê³„íš
    â—¦ ì´ ê¸€ì—ëŠ” {avg_images + 1}ì¥ ì´ìƒì˜ ì´ë¯¸ì§€ë¥¼ ì‚½ì…í•  ì˜ˆì •ì…ë‹ˆë‹¤.
    â—¦ ë™ì˜ìƒì€ ìµœì†Œ 1ê°œ ì´ìƒ í¬í•¨í•˜ëŠ” ê²ƒì„ ê¶Œì¥í•©ë‹ˆë‹¤.

4. í‚¤ì›Œë“œ ë°˜ë³µ íšŸìˆ˜:
    â—¦ ê¸€ ì „ì²´ì—ì„œ íƒ€ê²Ÿ í‚¤ì›Œë“œê°€ 5~6íšŒ ì •ë„ ìì—°ìŠ¤ëŸ½ê²Œ ë°˜ë³µë˜ë„ë¡ ì‘ì„±í•´ ì£¼ì„¸ìš”.
    â—¦ ì†Œì œëª©ì— í•„ìˆ˜ í‚¤ì›Œë“œë¥¼ ì‚½ì…í•˜ì—¬ ìŠ¤ë§ˆíŠ¸ ë¸”ë¡ ë…¸ì¶œì— ìœ ë¦¬í•œ êµ¬ì¡°ë¥¼ ë§Œë“¤ì–´ ì£¼ì„¸ìš”.
    â—¦ ê¸€ ì„œë¡  ë¶€ë¶„ì— íƒ€ê²Ÿ í‚¤ì›Œë“œë¥¼ ë°˜ë“œì‹œ ì–¸ê¸‰í•´ ì£¼ì„¸ìš”.

[ê¸€ì“°ê¸° ìƒì„¸ ì§€ì‹œì‚¬í•­ (ë„¤ì´ë²„ SEO ìµœì í™”)]
1. ê¸€ì˜ êµ¬ì„± ë° íë¦„:
    â—¦ ì„œë¡ (10-15%): ë…ìì˜ ê´€ì‹¬ì„ ëŒê³  ë¬¸ì œë¥¼ ì œì‹œí•˜ë©°, ì´ˆë°˜ 3ì´ˆ ë‚´ì— ë…ìê°€ ì›í•˜ëŠ” í•µì‹¬ ì •ë³´ë¥¼ ëª…í™•íˆ ì œì‹œí•˜ê³ , ê°œì¸ì˜ ê²½í—˜ì´ë‚˜ ê°ì •ì„ ë‹´ì•„ ê³µê°ëŒ€ë¥¼ í˜•ì„±í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ì‹œì‘í•´ ì£¼ì„¸ìš”. íƒ€ê²Ÿ í‚¤ì›Œë“œë¥¼ ë°˜ë“œì‹œ ì–¸ê¸‰í•´ì•¼ í•©ë‹ˆë‹¤.
    â—¦ ë³¸ë¡ (70-80%): êµ¬ì²´ì ì¸ ì •ë³´ì™€ í•´ê²°ì±…ì„ ì œê³µí•˜ë©°, ë…ìê°€ ì›í•˜ëŠ” ì •ë³´ë¥¼ ì¶©ë¶„íˆ ì œê³µí•˜ê³ , ê¸€ì˜ íë¦„ì„ ë°©í•´í•˜ì§€ ì•ŠëŠ” ì„ ì—ì„œ ê´€ë ¨ ë‚´ìš©ì„ ìì—°ìŠ¤ëŸ½ê²Œ í’€ì–´ë‚´ì„¸ìš”.
    â—¦ ê²°ë¡ (10-15%): ë‚´ìš©ì„ ìš”ì•½í•˜ê³  ë…ìì˜ í–‰ë™(ì˜ˆ: ëŒ“ê¸€, êµ¬ë§¤ ë“±)ì„ ìœ ë„í•˜ëŠ” ë¬¸êµ¬ë¥¼ í¬í•¨í•˜ì—¬ ë§ˆë¬´ë¦¬í•´ ì£¼ì„¸ìš”.
    â—¦ ë¬¸ë‹¨ êµ¬ë¶„: ë¬¸ì¥ì„ ë‘ ì„¸ ê°œ ì •ë„ ì´ì–´ì„œ ë¬¸ë‹¨ì˜ í˜•íƒœë¡œ ì‘ì„±í•˜ê³ , ë¬¸ë‹¨ êµ¬ë¶„ì„ í™•ì‹¤íˆ í•´ ì£¼ì„¸ìš”.

2. ì²´ë¥˜ ì‹œê°„ ê·¹ëŒ€í™” ì „ëµ:
    â—¦ ì‹œê° ìë£Œ ì ê·¹ í™œìš©: ê¸´ í…ìŠ¤íŠ¸ë¥¼ ë‚˜ëˆ„ëŠ” ìš©ë„ë¡œ ì´ë¯¸ì§€ë¥¼ ì ì ˆíˆ ì‚½ì…í•˜ì—¬ ê°€ë…ì„±ì„ ë†’ì´ê³ , ë…ìì˜ í¥ë¯¸ë¥¼ ìœ ë°œí•˜ì„¸ìš”.
    â—¦ ì†Œí†µ ìœ ë„: ëŒ“ê¸€ê³¼ ì†Œí†µì„ ìœ ë„í•˜ëŠ” ë¬¸êµ¬ë¥¼ í¬í•¨í•˜ì—¬ ì²´ë¥˜ ì‹œê°„ì„ ëŠ˜ë¦¬ì„¸ìš”.

3. ê°€ë…ì„± ë° í¬ë§·íŒ…:
    â—¦ ì¸ìš©êµ¬ ì‚¬ìš©: ë¬¸ë‹¨ì„ êµ¬ë¶„í•˜ê±°ë‚˜ ë‚´ìš©ì„ ê°•ì¡°í•  ë•Œ ì¸ìš©êµ¬ë¥¼ ì ì ˆíˆ ì‚¬ìš©í•˜ì—¬ ê¸€ì˜ ì—°ê´€ì„±ì„ ë†’ì´ê³  ê°€ë…ì„±ì„ í–¥ìƒì‹œì¼œ ì£¼ì„¸ìš”.
    â—¦ ì •ë ¬: ê¸°ë³¸ì ìœ¼ë¡œ ì¢Œì¸¡ ì •ë ¬ì„ í•˜ë˜, ë¬¸ì¥ì„ ë‘ ì„¸ ê°œ ì •ë„ ì´ì–´ì„œ ë¬¸ë‹¨ìœ¼ë¡œ ì‘ì„±í•˜ê³  ë¬¸ë‹¨ êµ¬ë¶„ì„ í™•ì‹¤íˆ í•´ì£¼ì„¸ìš”.

[ê²°ê³¼ í˜•ì‹]
ë‹¤ìŒ í˜•ì‹ìœ¼ë¡œ ê²°ê³¼ë¥¼ ì œê³µí•´ì£¼ì„¸ìš”:

**ì œëª©:** [í‚¤ì›Œë“œê°€ ì•ì— í¬í•¨ëœ ë§¤ë ¥ì ì¸ ì œëª©]

**ë³¸ë¬¸:**
[ì„œë¡  - í‚¤ì›Œë“œ í¬í•¨, ê³µê°ëŒ€ í˜•ì„±]

[ë³¸ë¡  - êµ¬ì²´ì  ì •ë³´ì™€ í•´ê²°ì±…, ì†Œì œëª© í™œìš©]

[ê²°ë¡  - ìš”ì•½ ë° í–‰ë™ ìœ ë„]

**ì¶”ì²œ íƒœê·¸:** #íƒœê·¸1, #íƒœê·¸2, #íƒœê·¸3, #íƒœê·¸4, #íƒœê·¸5

**ì´ë¯¸ì§€ ì‚½ì… ìœ„ì¹˜:**
- [ì²« ë²ˆì§¸ ì´ë¯¸ì§€ ìœ„ì¹˜ì™€ ì„¤ëª…]
- [ë‘ ë²ˆì§¸ ì´ë¯¸ì§€ ìœ„ì¹˜ì™€ ì„¤ëª…]
- [ì„¸ ë²ˆì§¸ ì´ë¯¸ì§€ ìœ„ì¹˜ì™€ ì„¤ëª…]

**ìµœì¢… ê¸€ììˆ˜:** [ê³µë°± ì œì™¸ ê¸€ììˆ˜]ì
"""
        return prompt.strip()
    
    @staticmethod
    def generate_content_analysis_prompt(keyword: str, structured_data: Dict, content_type: str = "ì •ë³´/ê°€ì´ë“œí˜•", tone: str = "ì •ì¤‘í•œ ì¡´ëŒ“ë§ì²´", review_detail: str = "") -> str:
        """ë„¤ì´ë²„ SEO ìµœì í™” ì½˜í…ì¸  ë¶„ì„ ê¸°ë°˜ AI í”„ë¡¬í”„íŠ¸ ìƒì„± (ì»¨í…ì¸  ìœ í˜•ê³¼ ë§íˆ¬, í›„ê¸° ì„¸ë¶€ ìœ í˜• ë°˜ì˜)"""
        
        competitor_info = structured_data.get("competitor_analysis", {})
        top_blogs = competitor_info.get("top_blogs", [])
        summary = competitor_info.get("summary", {})
        
        # ì»¨í…ì¸  ìœ í˜•ë³„ ì§€ì¹¨ (ë„¤ì´ë²„ SEO ìµœì í™”)
        content_guidelines = {
            "í›„ê¸°/ë¦¬ë·°í˜•": {
                "approach": "ê°œì¸ ê²½í—˜ê³¼ ì†”ì§í•œ í›„ê¸°ë¥¼ ì¤‘ì‹¬ìœ¼ë¡œ 'ìœ ì¼ë¬´ì´í•œ ì½˜í…ì¸ ' ì‘ì„±",
                "structure": "ì‚¬ìš© ì „ ê³ ë¯¼ â†’ ì§ì ‘ ì‚¬ìš© ê²½í—˜ â†’ ì¥ë‹¨ì  ì†”ì§ í›„ê¸° â†’ ìµœì¢… í‰ê°€ ë° ì¶”ì²œ",
                "keywords": ["ì§ì ‘ ì¨ë´¤ì–´ìš”", "ì†”ì§ í›„ê¸°", "ê°œì¸ì ìœ¼ë¡œ", "ì‹¤ì œë¡œ ì‚¬ìš©í•´ë³´ë‹ˆ", "ì¶”ì²œí•˜ëŠ” ì´ìœ "],
                "detailed_tips": [
                    "ğŸŒŸ ê°œì¸ì˜ ê³ ìœ í•œ ìŠ¤í† ë¦¬ì™€ ê°ì •ì„ ìƒì„¸íˆ ë‹´ì•„ ê²€ìƒ‰ ì•Œê³ ë¦¬ì¦˜ì— ìµœì í™”",
                    "ìƒìƒí•œ ë¬˜ì‚¬: ì œí’ˆ/ì„œë¹„ìŠ¤ ì‚¬ìš© ì „í›„ ë³€í™”ë¥¼ êµ¬ì²´ì  ì—í”¼ì†Œë“œë¡œ ì„œìˆ ",
                    "ê°ê´€ì  ì •ë³´ì™€ ì£¼ê´€ì  í‰ê°€ ê· í˜•: ì¥ë‹¨ì  ëª…í™• ì œì‹œ, ë³„ì /í‰ì  í¬í•¨",
                    "ì œí’ˆ ì œê³µ ë°©ì‹ ëª…ì‹œ: ìë¹„ êµ¬ë§¤, í˜‘ì°¬, ì²´í—˜ë‹¨ ë“± íˆ¬ëª…í•˜ê²Œ ê³µê°œí•˜ì—¬ ì‹ ë¢°ì„± í™•ë³´",
                    "ì‹¤ì œ ì‚¬ìš© ëª¨ìŠµì˜ ê³ í’ˆì§ˆ ì‚¬ì§„/ì˜ìƒ (AI ìƒì„± ì´ë¯¸ì§€ë³´ë‹¤ ì‹¤ì œ ì‚¬ìš© ì‚¬ì§„)",
                    "ì‚¬ìš© ê¸°ê°„, íšŸìˆ˜, ë¹„ìš© ë“± êµ¬ì²´ì  ìˆ˜ì¹˜ì™€ ë°ì´í„° ì œê³µ",
                    "Before & After ëª…í™•í•œ ë¹„êµ íš¨ê³¼ ì„¤ëª…"
                ]
            },
            "ì •ë³´/ê°€ì´ë“œí˜•": {
                "approach": "ì •í™•í•˜ê³  í’ë¶€í•œ ì •ë³´ë¥¼ ì²´ê³„ì ìœ¼ë¡œ ì œê³µí•˜ì—¬ ê²€ìƒ‰ìì˜ ê¶ê¸ˆì¦ ì™„ì „ í•´ê²°",
                "structure": "ë¬¸ì œ ì •ì˜ â†’ í•´ê²°ì±… ì œì‹œ â†’ ë‹¨ê³„ë³„ ê°€ì´ë“œ â†’ ì£¼ì˜ì‚¬í•­ â†’ ë§ˆë¬´ë¦¬",
                "keywords": ["ì™„ë²½ ì •ë¦¬", "ì´ì •ë¦¬", "í•µì‹¬ í¬ì¸íŠ¸", "ë‹¨ê³„ë³„ ê°€ì´ë“œ", "ì •í™•í•œ ì •ë³´"],
                "detailed_tips": [
                    "ğŸ“š ëª…í™•í•œ êµ¬ì¡°: ì„œë¡ -ë³¸ë¡ -ê²°ë¡  + ì†Œì œëª©(H2, H3) ì ê·¹ í™œìš©ìœ¼ë¡œ ê²€ìƒ‰ ìµœì í™”",
                    "ê°ê´€ì  ë°ì´í„°ì™€ ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ìë£Œ ê¸°ë°˜ ì •ë³´ ì œê³µ",
                    "ë‹¨ê³„ë³„ ì„¤ëª…, ë¹„êµí‘œ, ì²´í¬ë¦¬ìŠ¤íŠ¸ë¡œ ì‹¤ìš©ì  ê°€ì¹˜ ê·¹ëŒ€í™”",
                    "ê´€ë ¨ ê²€ìƒ‰ì–´ë¥¼ ì†Œì œëª©ê³¼ ë³¸ë¬¸ì— ìì—°ìŠ¤ëŸ½ê²Œ í¬í•¨í•˜ì—¬ ê²€ìƒ‰ ë…¸ì¶œ ì¦ëŒ€",
                    "ì¤‘ìš”í•œ ì •ë³´ëŠ” êµµì€ ê¸€ì”¨ë‚˜ ì¸ìš© í˜•íƒœë¡œ ê°•ì¡°í•˜ì—¬ ê°€ë…ì„± í–¥ìƒ",
                    "ë…ìê°€ ë°”ë¡œ ë”°ë¼í•  ìˆ˜ ìˆëŠ” êµ¬ì²´ì  ì‹¤í–‰ ë°©ë²• ì œì‹œ",
                    "ì „ë¬¸ ìš©ì–´ ì‰½ê²Œ í’€ì–´ì„œ ì„¤ëª…, ì‹œê°„/ë¹„ìš© ë“± í˜„ì‹¤ì  ì •ë³´ í¬í•¨"
                ]
            },
            "ë¹„êµ/ì¶”ì²œí˜•": {
                "approach": "ì²´ê³„ì  ë¹„êµë¶„ì„ìœ¼ë¡œ ë…ìì˜ ì„ íƒ ê³ ë¯¼ì„ ì™„ì „íˆ í•´ê²°",
                "structure": "ë¹„êµ ê¸°ì¤€ ì œì‹œ â†’ ê° ì˜µì…˜ ë¶„ì„ â†’ ì¥ë‹¨ì  ë¹„êµ â†’ ìƒí™©ë³„ ì¶”ì²œ â†’ ìµœì¢… ê²°ë¡ ",
                "keywords": ["VS ë¹„êµ", "Best 5", "ì¥ë‹¨ì ", "ìƒí™©ë³„ ì¶”ì²œ", "ê°€ì„±ë¹„"],
                "detailed_tips": [
                    "âš–ï¸ ì²´ê³„ì  ë¹„êµ í•­ëª©: ê°€ê²©, ì„±ëŠ¥, ì¥ë‹¨ì , ëŒ€ìƒ ë“± ê°ê´€ì  ê¸°ì¤€ ëª…ì‹œ",
                    "ë¹„êµí‘œ í™œìš©í•˜ì—¬ í•œëˆˆì— ë³´ëŠ” íŠ¹ì§• ì •ë¦¬ (ê°€ë…ì„±ê³¼ ì •ë³´ ì „ë‹¬ë ¥ ê·¹ëŒ€í™”)",
                    "ìƒí™©ë³„ ë§ì¶¤ ì¶”ì²œ: ê°€ì„±ë¹„ ì¤‘ì‹œ, íŠ¹ì • ê¸°ëŠ¥ ì„ í˜¸, ì´ˆë³´ììš© ë“± êµ¬ì²´ì  ë¶„ë¥˜",
                    "ê°ê´€ì  ê·¼ê±° ì œì‹œ: ì‹¤ì œ ì‚¬ìš©ì í›„ê¸°, í‰ì , íŒë§¤ëŸ‰ ë“± ë°ì´í„° í™œìš©",
                    "ì¹´í…Œê³ ë¦¬ë³„ 1ìœ„ ì„ ì •: ê°€ì„±ë¹„ ìµœê³ , ì„±ëŠ¥ ìµœê³ , ë””ìì¸ ìµœê³  ë“±",
                    "ê²°ë¡ ì—ì„œ ëª…í™•í•œ ì„ íƒ ê°€ì´ë“œì™€ ìµœì¢… ì¶”ì²œ ìˆœìœ„ ì œì‹œ",
                    "êµ¬ë§¤ ì‹œ ì²´í¬í¬ì¸íŠ¸ì™€ ì£¼ì˜ì‚¬í•­ ìƒì„¸ ì•ˆë‚´"
                ]
            }
        }
        
        # í›„ê¸° ì„¸ë¶€ ìœ í˜•ë³„ ì§€ì¹¨ (í›„ê¸°/ë¦¬ë·°í˜•ì¼ ë•Œ ì ìš©)
        review_detail_guidelines = {
            "ë‚´ëˆë‚´ì‚° í›„ê¸°": {
                "description": "ì§ì ‘ êµ¬ë§¤í•´ì„œ ì¨ë³¸ ì†”ì§í•œ ê°œì¸ í›„ê¸°",
                "key_points": [
                    "ğŸ’° 'ì§ì ‘ êµ¬ë§¤í•´ì„œ ì¨ë³¸ í›„ê¸°'ì„ì„ ìì—°ìŠ¤ëŸ½ê²Œ ì–¸ê¸‰",
                    "êµ¬ë§¤í•˜ê²Œ ëœ ì´ìœ ì™€ ê³ ë¯¼í–ˆë˜ ì ë“¤ì„ ì†”ì§í•˜ê²Œ í‘œí˜„",
                    "ì‹¤ì œ ì‚¬ìš©í•´ë³´ë©´ì„œ ëŠë‚€ ì¥ì ê³¼ ì•„ì‰¬ìš´ ì  ê· í˜•ìˆê²Œ ì„œìˆ ",
                    "ê°€ì„±ë¹„ì— ëŒ€í•œ ê°œì¸ì  í‰ê°€ì™€ ì¶”ì²œ ì—¬ë¶€",
                    "ë¹„ìŠ·í•œ ì œí’ˆê³¼ ë¹„êµí–ˆì„ ë•Œì˜ ì°¨ì´ì ",
                    "ì¬êµ¬ë§¤ ì˜í–¥ì´ë‚˜ ì§€ì¸ ì¶”ì²œ ì˜í–¥ í¬í•¨"
                ],
                "transparency": "ê°œì¸ êµ¬ë§¤ë¡œ í¸ê²¬ ì—†ëŠ” ì†”ì§í•œ í›„ê¸°ì„ì„ ê°•ì¡°"
            },
            "í˜‘ì°¬ í›„ê¸°": {
                "description": "ë¸Œëœë“œì—ì„œ ì œê³µë°›ì€ ì œí’ˆì˜ ì •ì§í•œ ë¦¬ë·°",
                "key_points": [
                    "ğŸ¤ 'ë¸Œëœë“œë¡œë¶€í„° ì œí’ˆì„ ì œê³µë°›ì•„ ì‘ì„±í•œ í›„ê¸°'ì„ì„ ìì—°ìŠ¤ëŸ½ê²Œ ì–¸ê¸‰",
                    "í˜‘ì°¬ì´ì§€ë§Œ ì†”ì§í•˜ê³  ê³µì •í•œ í‰ê°€ë¥¼ í•˜ê² ë‹¤ëŠ” ì˜ì§€ í‘œí˜„",
                    "ì œí’ˆì˜ ì¥ì ê³¼ ì•„ì‰¬ìš´ ì ì„ ê· í˜•ìˆê²Œ ì„œìˆ í•˜ëŠ” êµ¬ì¡°",
                    "ë…ì ì…ì¥ì—ì„œ ê°ê´€ì ìœ¼ë¡œ í‰ê°€í•˜ëŠ” ê´€ì ",
                    "ì‹¤ì œ ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤ì™€ ëŠë‚€ ì ë“¤ì„ ìƒì„¸íˆ í‘œí˜„",
                    "í˜‘ì°¬ ê´€ê³„ë¥¼ ë– ë‚˜ ì†”ì§í•œ ì˜ê²¬ ì œì‹œí•˜ëŠ” í†¤"
                ],
                "transparency": "í˜‘ì°¬ ì œí’ˆì´ì§€ë§Œ ê³µì •í•˜ê³  ì†”ì§í•œ ë¦¬ë·° ì œê³µ"
            },
            "ì²´í—˜ë‹¨ í›„ê¸°": {
                "description": "ì²´í—˜ë‹¨ ì°¸ì—¬ë¥¼ í†µí•œ ì œí’ˆ ì‚¬ìš© í›„ê¸°",
                "key_points": [
                    "ğŸ‘¥ 'ì²´í—˜ë‹¨ì— ì°¸ì—¬í•˜ì—¬ ì‘ì„±í•œ í›„ê¸°'ì„ì„ ìì—°ìŠ¤ëŸ½ê²Œ ì–¸ê¸‰",
                    "ì²´í—˜ ê¸°íšŒë¥¼ ì–»ê²Œ ëœ ê²ƒì— ëŒ€í•œ ê°ì‚¬í•¨ í‘œí˜„",
                    "ì œí’ˆì„ ê¼¼ê¼¼íˆ í…ŒìŠ¤íŠ¸í•´ë³¸ ê³¼ì •ê³¼ ëŠë‚€ ì  ì„œìˆ ",
                    "ì²´í—˜ë‹¨ìœ¼ë¡œì„œ ê°ê´€ì ì´ê³  ê³µì •í•œ í‰ê°€ ì˜ì§€ í‘œí˜„",
                    "ì¼ë°˜ êµ¬ë§¤ ê³ ê° ì…ì¥ì—ì„œì˜ ì†”ì§í•œ ì˜ê²¬ ì œì‹œ",
                    "ì²´í—˜ë‹¨ í›„ê¸°ì§€ë§Œ í¸ê²¬ ì—†ëŠ” ê· í˜•ì¡íŒ ë¦¬ë·° ì‘ì„±"
                ],
                "transparency": "ì²´í—˜ë‹¨ ì°¸ì—¬ í›„ê¸°ì˜ íŠ¹ì„±ê³¼ í•œê³„ë¥¼ íˆ¬ëª…í•˜ê²Œ ê³µê°œ"
            },
            "ëŒ€ì—¬/ë Œíƒˆ í›„ê¸°": {
                "description": "ë Œíƒˆ ì„œë¹„ìŠ¤ë¥¼ ì´ìš©í•œ ì œí’ˆ ì‚¬ìš© í›„ê¸°",
                "key_points": [
                    "ğŸ”„ 'ë Œíƒˆ ì„œë¹„ìŠ¤ë¡œ ì´ìš©í•´ë³¸ í›„ê¸°'ì„ì„ ìì—°ìŠ¤ëŸ½ê²Œ ì–¸ê¸‰",
                    "ë Œíƒˆì„ ì„ íƒí•œ ì´ìœ ì™€ ê³ ë¯¼í–ˆë˜ ì ë“¤ í‘œí˜„",
                    "ë Œíƒˆ ì„œë¹„ìŠ¤ì˜ ì¥ì ê³¼ ì•„ì‰¬ì› ë˜ ì  ê· í˜•ìˆê²Œ ì„œìˆ ",
                    "ë Œíƒˆê³¼ êµ¬ë§¤ì˜ ì°¨ì´ì ì— ëŒ€í•œ ê°œì¸ì  ì˜ê²¬",
                    "ê²½ì œì„±ê³¼ í¸ì˜ì„± ì¸¡ë©´ì—ì„œì˜ í‰ê°€",
                    "ì–´ë–¤ ìƒí™©ì— ë Œíƒˆì´ ì í•©í• ì§€ì— ëŒ€í•œ ì˜ê²¬ ì œì‹œ"
                ],
                "transparency": "ë Œíƒˆ ì„œë¹„ìŠ¤ íŠ¹ì„±ìƒ ì œí•œì  ì‚¬ìš© í›„ê¸°ì„ì„ ëª…í™•íˆ ì•ˆë‚´"
            }
        }
        
        # ë§íˆ¬ë³„ ì§€ì¹¨
        tone_guidelines = {
            "ì¹œê·¼í•œ ë°˜ë§ì²´": {
                "style": "ì¹œêµ¬ì™€ ëŒ€í™”í•˜ë“¯ í¸ì•ˆí•˜ê³  ì¹œê·¼í•œ ë§íˆ¬",
                "examples": ["ì¨ë´¤ëŠ”ë° ì§„ì§œ ì¢‹ë”ë¼~", "ì™„ì „ ê°•ì¶”!", "ì†”ì§íˆ ë§í•˜ë©´", "ì´ê±° ì§„ì§œ ëŒ€ë°•ì´ì•¼"],
                "ending": "ëŒ“ê¸€ë¡œ ê¶ê¸ˆí•œ ê±° ë¬¼ì–´ë´!",
                "sentence_style": "ì§§ê³  ë¦¬ë“œë¯¸ì»¬í•œ ë¬¸ì¥",
                "detailed_tips": [
                    "ê°íƒ„ì‚¬ì™€ ì˜ì„±ì–´ë¥¼ ì ì ˆíˆ í™œìš© (ì™€~, í—‰!, ìŒìŒ)",
                    "ì¤„ì„ë§ê³¼ ì‹ ì¡°ì–´ë¥¼ ìì—°ìŠ¤ëŸ½ê²Œ ì‚¬ìš© (ê°“í…œ, í•µê¿€í…œ, ë ˆê²Œë…¸)",
                    "ì´ëª¨í‹°ì½˜ ëŒ€ì‹  ë¬¸ìë¡œ ê°ì • í‘œí˜„ (~, !, ?ë¥¼ í™œìš©)",
                    "ê°œì¸ì  ê²½í—˜ì„ ë§ì´ ë„£ì–´ ì¹œë°€ê° ì¡°ì„±",
                    "ë…ìë¥¼ ì¹œêµ¬ì²˜ëŸ¼ ë¶€ë¥´ë©° ê³µê°ëŒ€ í˜•ì„±",
                    "ì–´ë ¤ìš´ ë‚´ìš©ë„ ì‰½ê³  ì¬ë¯¸ìˆê²Œ í’€ì–´ì„œ ì„¤ëª…",
                    "ë†ë‹´ì´ë‚˜ ìœ ë¨¸ë¥¼ ì ì ˆíˆ ì„ì–´ ì¬ë¯¸ ìš”ì†Œ ì¶”ê°€"
                ]
            },
            "ì •ì¤‘í•œ ì¡´ëŒ“ë§ì²´": {
                "style": "ì •ì¤‘í•˜ê³  ì˜ˆì˜ ë°”ë¥¸ ì¡´ëŒ“ë§ë¡œ ì‹ ë¢°ê° ì¡°ì„±",
                "examples": ["ì‚¬ìš©í•´ë³´ì•˜ìŠµë‹ˆë‹¤", "ì¶”ì²œë“œë¦½ë‹ˆë‹¤", "ë„ì›€ì´ ë˜ì‹œê¸¸ ë°”ëë‹ˆë‹¤", "ì°¸ê³ í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤"],
                "ending": "ë„ì›€ì´ ë˜ì—ˆìœ¼ë©´ ì¢‹ê² ìŠµë‹ˆë‹¤. ê¶ê¸ˆí•œ ì ì€ ëŒ“ê¸€ë¡œ ë¬¸ì˜í•´ ì£¼ì„¸ìš”.",
                "sentence_style": "ì •ì¤‘í•˜ê³  ì™„ì „í•œ ë¬¸ì¥",
                "detailed_tips": [
                    "ëª¨ë“  ë¬¸ì¥ì„ ì¡´ëŒ“ë§ë¡œ ì¼ê´€ì„± ìˆê²Œ ì‘ì„±",
                    "ì •ì¤‘í•œ í‘œí˜„ê³¼ ê²¸ì†í•œ íƒœë„ ìœ ì§€",
                    "ë…ìë¥¼ ë°°ë ¤í•˜ëŠ” ë§ˆìŒê°€ì§ì´ ë“œëŸ¬ë‚˜ëŠ” í‘œí˜„ ì‚¬ìš©",
                    "í™•ì‹ ë³´ë‹¤ëŠ” '~ê²ƒ ê°™ìŠµë‹ˆë‹¤', '~ë¡œ ë³´ì…ë‹ˆë‹¤' ë“± ê²¸ì†í•œ í‘œí˜„",
                    "ì „ë¬¸ì ì´ë©´ì„œë„ ì–´ë µì§€ ì•Šì€ ì ì ˆí•œ ì–´íœ˜ ì„ íƒ",
                    "ë…ìì˜ ìƒí™©ì„ ê³ ë ¤í•œ ë°°ë ¤ ê¹Šì€ ì¡°ì–¸ ì œê³µ",
                    "ì •ë³´ ì œê³µ ì‹œ ì¶œì²˜ë‚˜ ê·¼ê±°ë¥¼ ëª…í™•íˆ ì œì‹œ"
                ]
            },
            "ì „ë¬¸ê°€/ë¦¬ë·°ì–´ì²´": {
                "style": "ê°ê´€ì ì´ê³  ì „ë¬¸ì ì¸ ë¶„ì„ í†¤",
                "examples": ["ë¶„ì„ ê²°ê³¼", "ê°ê´€ì ìœ¼ë¡œ í‰ê°€í•˜ë©´", "ì „ë¬¸ì  ê²¬í•´ë¡œëŠ”", "ë°ì´í„°ì— ë”°ë¥´ë©´"],
                "ending": "ê°ê´€ì ì¸ ë¶„ì„ì´ ë„ì›€ì´ ë˜ì…¨ê¸°ë¥¼ ë°”ëë‹ˆë‹¤.",
                "sentence_style": "ë…¼ë¦¬ì ì´ê³  ë¶„ì„ì ì¸ ë¬¸ì¥",
                "detailed_tips": [
                    "êµ¬ì²´ì ì¸ ë°ì´í„°ì™€ ìˆ˜ì¹˜ë¥¼ ê·¼ê±°ë¡œ ì œì‹œ",
                    "ì¥ë‹¨ì ì„ ê· í˜•ìˆê³  ê³µì •í•˜ê²Œ ë¶„ì„",
                    "ì „ë¬¸ ìš©ì–´ë¥¼ ì •í™•íˆ ì‚¬ìš©í•˜ë˜ ì„¤ëª…ë„ í•¨ê»˜ ì œê³µ",
                    "ê°œì¸ì  ê°ì •ë³´ë‹¤ëŠ” ê°ê´€ì  ì‚¬ì‹¤ì— ê¸°ë°˜í•œ í‰ê°€",
                    "ë¹„êµ ëŒ€ìƒì´ ìˆì„ ë•ŒëŠ” ëª…í™•í•œ ê¸°ì¤€ìœ¼ë¡œ ë¹„êµ",
                    "ê²°ë¡ ì— ì´ë¥´ëŠ” ë…¼ë¦¬ì  ê·¼ê±°ë¥¼ ë‹¨ê³„ì ìœ¼ë¡œ ì œì‹œ",
                    "ì‹ ë¢°ì„± ìˆëŠ” ì¶œì²˜ë‚˜ í…ŒìŠ¤íŠ¸ ê²°ê³¼ ì¸ìš©"
                ]
            }
        }
        
        current_content = content_guidelines.get(content_type, content_guidelines["ì •ë³´/ê°€ì´ë“œí˜•"])
        current_tone = tone_guidelines.get(tone, tone_guidelines["ì •ì¤‘í•œ ì¡´ëŒ“ë§ì²´"])
        
        # í›„ê¸° ì„¸ë¶€ ìœ í˜• ì •ë³´ (í›„ê¸°/ë¦¬ë·°í˜•ì¼ ë•Œë§Œ ì ìš©)
        current_review_detail = None
        if content_type == "í›„ê¸°/ë¦¬ë·°í˜•" and review_detail:
            current_review_detail = review_detail_guidelines.get(review_detail)
        
        prompt = f"""
# ë„¤ì´ë²„ SEO ìµœì í™” ë¸”ë¡œê·¸ ì½˜í…ì¸  ìƒì„± ìš”ì²­

## ğŸ¯ ëª©í‘œ í‚¤ì›Œë“œ
**"{keyword}"**

## ğŸš€ ë„¤ì´ë²„ SEO ìµœì í™” í•„ìˆ˜ ì›ì¹™
ë‹¹ì‹ ì€ 15ë…„ ê²½ë ¥ì˜ ë„¤ì´ë²„ ë¸”ë¡œê·¸ ì „ë¬¸ê°€ì´ì SEO ì „ë¬¸ê°€ì…ë‹ˆë‹¤. ë„¤ì´ë²„ì˜ ìµœì‹  ê²€ìƒ‰ ì•Œê³ ë¦¬ì¦˜ì— ìµœì í™”ëœ ìƒìœ„ ë…¸ì¶œ ì½˜í…ì¸ ë¥¼ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤.

### ğŸ“Œ í•µì‹¬ SEO ì›ì¹™ (ë°˜ë“œì‹œ ì¤€ìˆ˜):
1. **ìœ ì¼ë¬´ì´í•œ ì½˜í…ì¸ **: ê²€ìƒ‰ìê°€ "ì´ ê¸€ ë„ˆë¬´ ì¢‹ë‹¤"ë¼ê³  ëŠë‚„ ë§Œí•œ ë…ì°½ì  ë‚´ìš© ì‘ì„±
2. **ì œëª© ìµœì í™”**: ë©”ì¸ í‚¤ì›Œë“œë¥¼ ì œëª© ë§¨ ì•ì— ë°°ì¹˜, ë¾°ì¡±í•˜ê³  ê°„ê²°í•œ ì œëª©
3. **ê¸€ì ìˆ˜**: 1,500~2,000ì (ê³µë°± ì œì™¸) ê¶Œì¥, 2,000ì ì´ˆê³¼ ê¸ˆì§€
4. **í‚¤ì›Œë“œ ë°˜ë³µ**: ì „ì²´ ê¸€ì—ì„œ íƒ€ê²Ÿ í‚¤ì›Œë“œ 5-6íšŒ ìì—°ìŠ¤ëŸ½ê²Œ ë°˜ë³µ
5. **3ì´ˆì˜ ë²•ì¹™**: ì²« ë¬¸ë‹¨ì—ì„œ ë…ìê°€ ì›í•˜ëŠ” ë‹µë³€ ëª…í™•íˆ ì œì‹œ
6. **ì²´ë¥˜ ì‹œê°„ ê·¹ëŒ€í™”**: ì‹œê°ì  í¥ë¯¸ ìœ ë°œ, ëª¨ë°”ì¼ ìµœì í™” ê³ ë ¤
7. **ì†Œì œëª© ìµœì í™”**: ê²€ìƒ‰ ë…¸ì¶œ í–¥ìƒì„ ìœ„í•´ ì†Œì œëª©(H2, H3)ì— íƒ€ê²Ÿ í‚¤ì›Œë“œ í¬í•¨

## ğŸ¨ ê¸€ì“°ê¸° ìŠ¤íƒ€ì¼ ì„¤ì •
**ì»¨í…ì¸  ìœ í˜•:** {content_type}
- **ì ‘ê·¼ë²•:** {current_content['approach']}
- **êµ¬ì¡°:** {current_content['structure']}
- **í•µì‹¬ í‚¤ì›Œë“œ:** {', '.join(current_content['keywords'])}

**ë§íˆ¬ ìŠ¤íƒ€ì¼:** {tone}
- **ìŠ¤íƒ€ì¼:** {current_tone['style']}
- **ì˜ˆì‹œ í‘œí˜„:** {', '.join(current_tone['examples'])}
- **ë¬¸ì¥ íŠ¹ì§•:** {current_tone['sentence_style']}
- **ë§ˆë¬´ë¦¬ ë¬¸êµ¬:** {current_tone['ending']}"""
        
        # í›„ê¸° ì„¸ë¶€ ìœ í˜• ì •ë³´ ì¶”ê°€ (í›„ê¸°/ë¦¬ë·°í˜•ì¼ ë•Œë§Œ)
        if current_review_detail:
            prompt += f"""

**ğŸ“ í›„ê¸° ì„¸ë¶€ ìœ í˜•:** {review_detail}
- **ì„¤ëª…:** {current_review_detail['description']}
- **íˆ¬ëª…ì„± ì›ì¹™:** {current_review_detail['transparency']}
- **í•„ìˆ˜ í¬í•¨ ìš”ì†Œ:**
  â€¢ {chr(10).join([f"  - {point}" for point in current_review_detail['key_points']])}"""
        
        prompt += f"""

## ğŸ“Š ê²½ìŸì‚¬ ë¶„ì„ ë°ì´í„°

### ìƒìœ„ {len(top_blogs)}ê°œ ë¸”ë¡œê·¸ ë¶„ì„ ê²°ê³¼:
"""
        
        # ê° ë¸”ë¡œê·¸ ì •ë³´ ì¶”ê°€
        for i, blog in enumerate(top_blogs, 1):
            prompt += f"""
**{i}ìœ„ ë¸”ë¡œê·¸:**
- ì œëª©: {blog['title']}
- ê¸€ììˆ˜: {blog['statistics']['content_length']}ì
- ì´ë¯¸ì§€: {blog['statistics']['image_count']}ê°œ, GIF: {blog['statistics']['gif_count']}ê°œ, ë™ì˜ìƒ: {blog['statistics']['video_count']}ê°œ
- íƒœê·¸: {', '.join(blog['tags'][:5])}{'...' if len(blog['tags']) > 5 else ''}
- ë‚´ìš© ë¯¸ë¦¬ë³´ê¸°: {blog['content_preview']}
"""
        
        # ì¢…í•© ë¶„ì„
        prompt += f"""
### ğŸ“ˆ ì¢…í•© ë¶„ì„:
- í‰ê·  ê¸€ììˆ˜: {summary.get('avg_content_length', 0)}ì
- ì¸ê¸° íƒœê·¸: {', '.join(summary.get('common_tags', []))}
- ë¶„ì„ ëŒ€ìƒ: {summary.get('total_blogs', 0)}ê°œ ë¸”ë¡œê·¸

## ğŸš€ ìš”ì²­ì‚¬í•­

ë‹¤ìŒ ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ” ë¸”ë¡œê·¸ ê¸€ì„ ì‘ì„±í•´ì£¼ì„¸ìš”:

### 1. ì œëª© ìƒì„±
- "{keyword}" í‚¤ì›Œë“œë¥¼ í¬í•¨í•˜ë˜ ê²½ìŸì‚¬ì™€ ì°¨ë³„í™”
- í´ë¦­ì„ ìœ ë„í•˜ëŠ” ë§¤ë ¥ì ì¸ ì œëª©
- SEOì— ìµœì í™”ëœ êµ¬ì¡°

### 2. ì½˜í…ì¸  êµ¬ì¡°
- **ê¸€ììˆ˜**: {summary.get('avg_content_length', 1000) + 200}ì ë‚´ì™¸ (ê²½ìŸì‚¬ë³´ë‹¤ ì•½ê°„ ê¸¸ê²Œ)
- **êµ¬ì„±**: ë„ì… â†’ ë¬¸ì œ ì œê¸° â†’ í•´ê²°ì±… ì œì‹œ â†’ ê²°ë¡ /í–‰ë™ ìœ ë„
- **í†¤ì•¤ë§¤ë„ˆ**: ì¹œê·¼í•˜ê³  ì „ë¬¸ì , ë…ìì˜ ê³ ë¯¼ì— ê³µê°

### 3. SEO ìµœì í™”
- ëª©í‘œ í‚¤ì›Œë“œ ìì—°ìŠ¤ëŸ½ê²Œ ë°°ì¹˜
- ê´€ë ¨ í‚¤ì›Œë“œ ë° ë¡±í…Œì¼ í‚¤ì›Œë“œ í™œìš©
- íƒœê·¸ ì¶”ì²œ: {', '.join(summary.get('common_tags', []))} ê¸°ë°˜ìœ¼ë¡œ 5-8ê°œ

### 4. ì½˜í…ì¸  íŠ¹ì§•
- ì‹¤ìš©ì ì´ê³  actionableí•œ ì •ë³´ ì œê³µ
- ê²½ìŸì‚¬ ëŒ€ë¹„ ì°¨ë³„í™”ëœ ê´€ì ì´ë‚˜ ì •ë³´
- ë…ìì˜ ë¬¸ì œë¥¼ êµ¬ì²´ì ìœ¼ë¡œ í•´ê²°

### 5. ğŸ¨ ìŠ¤íƒ€ì¼ ì ìš© í•„ìˆ˜ ì§€ì¹¨
**ë°˜ë“œì‹œ ë‹¤ìŒ ìŠ¤íƒ€ì¼ì„ ì ìš©í•´ì„œ ì‘ì„±í•´ì£¼ì„¸ìš”:**

**ğŸ“ ì»¨í…ì¸  ìœ í˜• ({content_type}) ì ìš©:**
- {current_content['approach']}
- êµ¬ì¡°ë¥¼ ë”°ë¼ ì‘ì„±: {current_content['structure']}
- ë‹¤ìŒ í‚¤ì›Œë“œë“¤ì„ ìì—°ìŠ¤ëŸ½ê²Œ í™œìš©: {', '.join(current_content['keywords'])}
- ì„¸ë¶€ ì‘ì„± ì§€ì¹¨:
  â€¢ {chr(10).join([f"  - {tip}" for tip in current_content['detailed_tips']])}

**ğŸ—£ï¸ ë§íˆ¬ ({tone}) ì ìš©:**
- {current_tone['style']}
- ë‹¤ìŒê³¼ ê°™ì€ í‘œí˜„ì„ ì‚¬ìš©: {', '.join(current_tone['examples'])}
- {current_tone['sentence_style']}ìœ¼ë¡œ ì‘ì„±
- ê¸€ ë§ˆì§€ë§‰ì€ "{current_tone['ending']}"ì™€ ìœ ì‚¬í•œ í†¤ìœ¼ë¡œ ë§ˆë¬´ë¦¬
- ì„¸ë¶€ ë§íˆ¬ ì§€ì¹¨:
  â€¢ {chr(10).join([f"  - {tip}" for tip in current_tone['detailed_tips']])}

## ğŸ“ ë„¤ì´ë²„ SEO ìµœì í™” ê²°ê³¼ í˜•ì‹

ë‹¤ìŒ í˜•ì‹ìœ¼ë¡œ ë„¤ì´ë²„ ìƒìœ„ ë…¸ì¶œì„ ìœ„í•œ ì™„ì„±ëœ ë¸”ë¡œê·¸ ê¸€ì„ ì œê³µí•´ì£¼ì„¸ìš”:

### âœ… í•„ìˆ˜ ì²´í¬ë¦¬ìŠ¤íŠ¸:
- [ ] ì œëª©ì— ë©”ì¸ í‚¤ì›Œë“œ ë§¨ ì• ë°°ì¹˜ ì™„ë£Œ
- [ ] ì²« ë¬¸ë‹¨ì— í•µì‹¬ ë‹µë³€ ì œì‹œ (3ì´ˆì˜ ë²•ì¹™)
- [ ] í‚¤ì›Œë“œ 5-6íšŒ ìì—°ìŠ¤ëŸ½ê²Œ ë°˜ë³µ 
- [ ] ì†Œì œëª©(H2, H3)ì— íƒ€ê²Ÿ í‚¤ì›Œë“œ í¬í•¨
- [ ] 1,500~2,000ì ë²”ìœ„ ì¤€ìˆ˜ (ê³µë°± ì œì™¸)
- [ ] ê°œì¸ì˜ ê³ ìœ í•œ ê²½í—˜/ê°ì • í¬í•¨
- [ ] ëª¨ë°”ì¼ ê°€ë…ì„± ê³ ë ¤í•œ ë¬¸ë‹¨ êµ¬ì„±

```
**ì œëª©**: [í‚¤ì›Œë“œê°€ ë§¨ ì•ì— ìˆëŠ” ë¾°ì¡±í•˜ê³  ê°„ê²°í•œ ì œëª©]

**ì„œë¡  (ì²« ë¬¸ë‹¨ - 3ì´ˆì˜ ë²•ì¹™)**:
[ë…ìê°€ ì›í•˜ëŠ” í•µì‹¬ ë‹µë³€ì„ ì¦‰ì‹œ ì œì‹œí•˜ê³  ê³µê°ì„ ë¶ˆëŸ¬ì¼ìœ¼í‚¤ëŠ” ë„ì…ë¶€]

**ë³¸ë¬¸**:
[ì†Œì œëª©ì„ í™œìš©í•œ ì²´ê³„ì  êµ¬ì„±, í‚¤ì›Œë“œ ìì—°ìŠ¤ëŸ½ê²Œ 5-6íšŒ ë°˜ë³µ]

**ê²°ë¡ **:
[ìš”ì•½ ë° í–‰ë™ ìœ ë„, ëŒ“ê¸€ ì†Œí†µ ìœ ë„ ë¬¸êµ¬ í¬í•¨]

**ì¶”ì²œ íƒœê·¸**: #ë©”ì¸í‚¤ì›Œë“œ, #ì—°ê´€í‚¤ì›Œë“œ1, #ì—°ê´€í‚¤ì›Œë“œ2, #ì—°ê´€í‚¤ì›Œë“œ3, #ì—°ê´€í‚¤ì›Œë“œ4

**ì´ë¯¸ì§€ ì‚½ì… ìœ„ì¹˜ ë° ìµœì í™”**:
- [ìœ„ì¹˜1] ì œëª©ê³¼ ê´€ë ¨ëœ ë©”ì¸ ì´ë¯¸ì§€ (ê³ í•´ìƒë„, í‚¤ì›Œë“œ í¬í•¨ íŒŒì¼ëª…)
- [ìœ„ì¹˜2] ë³¸ë¬¸ ì„¤ëª…ìš© ì´ë¯¸ì§€ (ì‹¤ì œ ì‚¬ìš©/ê²½í—˜ ì‚¬ì§„ ê¶Œì¥)
- [ìœ„ì¹˜3] ë¹„êµ/ì •ë¦¬ìš© ì´ë¯¸ì§€ (í‘œ, ì°¨íŠ¸ ë“±)

**ìµœì¢… ê¸€ììˆ˜**: [ê³µë°± ì œì™¸ ì •í™•í•œ ê¸€ììˆ˜]ì

**SEO ìµœì í™” í¬ì¸íŠ¸ ìš”ì•½**:
- í‚¤ì›Œë“œ ë°˜ë³µ íšŸìˆ˜: [X]íšŒ
- ì†Œì œëª© ê°œìˆ˜: [X]ê°œ  
- ì˜ˆìƒ ì²´ë¥˜ ì‹œê°„: [X]ë¶„
```
"""
        return prompt.strip()
    
    @staticmethod
    def generate_blog_structure_prompt(blog_content_structure: str) -> str:
        """ë¸”ë¡œê·¸ êµ¬ì¡° ê¸°ë°˜ í”„ë¡¬í”„íŠ¸ ìƒì„± (HTML êµ¬ì¡° ë¶„ì„ ë²„ì „)"""
        
        prompt = f"""
# ë¸”ë¡œê·¸ ì½˜í…ì¸  êµ¬ì¡° ë¶„ì„ ë° ì¬ì‘ì„±

## ğŸ“‹ ë¶„ì„ëœ ì½˜í…ì¸  êµ¬ì¡°:

{blog_content_structure}

## ğŸ¯ ìš”ì²­ì‚¬í•­

ìœ„ êµ¬ì¡°ë¥¼ ì°¸ê³ í•˜ì—¬ ë‹¤ìŒì„ ìˆ˜í–‰í•´ì£¼ì„¸ìš”:

### 1. êµ¬ì¡° ë¶„ì„
- ì½˜í…ì¸  íë¦„ íŒ¨í„´ íŒŒì•…
- í…ìŠ¤íŠ¸ì™€ ë¯¸ë””ì–´ì˜ ë°°ì¹˜ ë°©ì‹ ë¶„ì„
- íš¨ê³¼ì ì¸ êµ¬ì„± ìš”ì†Œ ì‹ë³„

### 2. ê°œì„ ëœ ë²„ì „ ì œì‘
- ë™ì¼í•œ êµ¬ì¡°ë¥¼ ìœ ì§€í•˜ë˜ ë‚´ìš©ì€ ì™„ì „íˆ ìƒˆë¡­ê²Œ
- ë” ë§¤ë ¥ì ì´ê³  ìœ ìš©í•œ ì •ë³´ë¡œ ì¬êµ¬ì„±
- SEO ìµœì í™” ê³ ë ¤

### 3. ê²°ê³¼ í˜•ì‹
```
êµ¬ì¡° ë¶„ì„:
[ì›ë³¸ êµ¬ì¡°ì˜ íŠ¹ì§•ê³¼ ì¥ì  ë¶„ì„]

ê°œì„ ëœ ì½˜í…ì¸ :

ì œëª©: [ìƒˆë¡œìš´ ì œëª©]

ë³¸ë¬¸:
[í…ìŠ¤íŠ¸ ë¶€ë¶„]

[ì´ë¯¸ì§€ ìœ„ì¹˜ - ì„¤ëª…: xxx]

[í…ìŠ¤íŠ¸ ë¶€ë¶„]

[GIF ìœ„ì¹˜ - ì„¤ëª…: xxx]

[í…ìŠ¤íŠ¸ ë¶€ë¶„]

[ë™ì˜ìƒ ìœ„ì¹˜ - ì„¤ëª…: xxx]

[í…ìŠ¤íŠ¸ ë¶€ë¶„]

íƒœê·¸: [ì¶”ì²œ íƒœê·¸ë“¤]
```
"""
        return prompt.strip()
    
    @staticmethod
    def generate_simple_rewrite_prompt(title: str, content: str, tags: List[str]) -> str:
        """ê°„ë‹¨í•œ ë¦¬ë¼ì´íŒ… í”„ë¡¬í”„íŠ¸"""
        
        prompt = f"""
# ë¸”ë¡œê·¸ ê¸€ ë¦¬ë¼ì´íŒ… ìš”ì²­

## ì›ë³¸ ì½˜í…ì¸ :
**ì œëª©:** {title}
**íƒœê·¸:** {', '.join(tags)}

**ë‚´ìš©:**
{content}

## ìš”ì²­ì‚¬í•­:
1. ë™ì¼í•œ ì£¼ì œì™€ ì •ë³´ë¥¼ ë‹¤ë£¨ë˜ ì™„ì „íˆ ìƒˆë¡œìš´ ë¬¸ì²´ì™€ êµ¬ì„±ìœ¼ë¡œ ì‘ì„±
2. ë” ë§¤ë ¥ì ì´ê³  ì½ê¸° ì‰¬ìš´ ê¸€ë¡œ ê°œì„ 
3. SEO ìµœì í™” ê³ ë ¤
4. ì›ë³¸ë³´ë‹¤ 10-20% ë” ê¸¸ê²Œ ì‘ì„±

## ê²°ê³¼ í˜•ì‹:
```
ì œëª©: [ìƒˆë¡œìš´ ì œëª©]

ë³¸ë¬¸:
[ë¦¬ë¼ì´íŒ…ëœ ë‚´ìš©]

ì¶”ì²œ íƒœê·¸: [#íƒœê·¸1, #íƒœê·¸2, ...]
```
"""
        return prompt.strip()


def create_ai_request_data(keyword: str, analyzed_blogs: List[Dict], content_type: str = "ì •ë³´/ê°€ì´ë“œí˜•", tone: str = "ì •ì¤‘í•œ ì¡´ëŒ“ë§ì²´", review_detail: str = "") -> Dict:
    """AI ìš”ì²­ìš© ë°ì´í„° ìƒì„± (ì»¨í…ì¸  ìœ í˜•ê³¼ ë§íˆ¬, í›„ê¸° ì„¸ë¶€ ìœ í˜• í¬í•¨)"""
    try:
        structure_analyzer = BlogContentStructure()
        structured_data = structure_analyzer.analyze_blog_structure(analyzed_blogs)
        structured_data["keyword"] = keyword
        
        # AI í”„ë¡¬í”„íŠ¸ ìƒì„± (ìŠ¤íƒ€ì¼ ì˜µì…˜ í¬í•¨)
        prompt_generator = BlogAIPrompts()
        ai_prompt = prompt_generator.generate_content_analysis_prompt(keyword, structured_data, content_type, tone, review_detail)
        
        return {
            "structured_data": structured_data,
            "ai_prompt": ai_prompt,
            "raw_blogs": analyzed_blogs,
            "content_type": content_type,
            "tone": tone,
            "review_detail": review_detail
        }
        
    except Exception as e:
        logger.error(f"AI ìš”ì²­ ë°ì´í„° ìƒì„± ì‹¤íŒ¨: {e}")
        return {}


# ì‚¬ìš© ì˜ˆì‹œ
if __name__ == "__main__":
    # í…ŒìŠ¤íŠ¸ìš© ë°ì´í„°
    test_blogs = [
        {
            "rank": 1,
            "title": "ê°•ì•„ì§€ ë‹¤ì´ì–´íŠ¸ ì‚¬ë£Œ ì¶”ì²œ",
            "content_length": 1247,
            "image_count": 8,
            "gif_count": 2,
            "video_count": 1,
            "tags": ["#ê°•ì•„ì§€ì‚¬ë£Œ", "#ë‹¤ì´ì–´íŠ¸", "#ì¶”ì²œ"],
            "text_content": "ê°•ì•„ì§€ ë‹¤ì´ì–´íŠ¸ì— ëŒ€í•œ ë‚´ìš©..."
        }
    ]
    
    # AI ìš”ì²­ ë°ì´í„° ìƒì„±
    ai_data = create_ai_request_data("ê°•ì•„ì§€ ë‹¤ì´ì–´íŠ¸ ì‚¬ë£Œ", test_blogs)
    print(ai_data["ai_prompt"])